!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var o in r)("object"==typeof exports?exports:t)[o]=r[o]}}(window,function(){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";function o(t){for(var e=t.length,r=[],o=0;o<e;o+=1)r.push(t[o]);return r}t.exports={select:function(t){return document.querySelector(t)},selectAll:function(t){return o((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))},find:function(t,e){return o(t.querySelectorAll(e))},removeClass:function(t,e){t.classList.remove(e)},addClass:function(t,e){t.classList.add(e)},hasClass:function(t,e){return t.classList.contains(e)},removeElement:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},closest:function(t,e){for(var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t&&!r.call(t,e);)t=t.parentElement;return t},getStyle:function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},blur:function(){document.activeElement&&document.activeElement.blur()},insertHtml:function(t,e,r){var o=["beforebegin","afterbegin","beforeend","afterend"];if(!o.includes(e))throw new TypeError("'position' must be one of them: "+o.join("„ÄÅ"));t.insertAdjacentHTML(e,r)}}},,function(t,e,r){},function(t,e,r){"use strict";var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}();r(2);var i,a=(i=r(0))&&i.__esModule?i:{default:i},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=o({},t.DEFAULTS,e),this.targets=Array.from(document.querySelectorAll("[data-magnifier]")).map(function(t){return{target:t,thumbImg:null,bigImg:null,tracker:null,zoom:null,loader:null,width:0,height:0,left:0,top:0,imgLoaded:!1,trackerSize:0,trackerLeft:0,trackerTop:0}}),this.transformProp=this._transformProp(),this._targetHover=this._targetHover.bind(this),this._init()}return n(t,[{key:"_init",value:function(){var t=this;this.targets.forEach(function(e,r){e.target.addEventListener("mousemove",t._targetHover.bind(t,r),!1),e.target.addEventListener("mouseout",t._targetOut.bind(t,r),!1)})}},{key:"_targetHover",value:function(t,e){var r=this,o=this.targets[t];o.target.getAttribute("data-magnifier-index")||(o.target.setAttribute("data-magnifier-index",t),this._creatDom(o),o.width=o.thumbImg.scrollWidth,o.height=o.thumbImg.scrollHeight);var n=this._getPointer(o.thumbImg,e);o.left=n.left,o.top=n.top,o.imgLoaded?(this._trackerEvent(o),this._zoomEvent(o)):(o.loader.style.display="block",this._imgLoad(o.bigImg).then(function(){o.imgLoaded=!0,o.loader.style.display="none",r._trackerEvent(o),r._zoomEvent(o)}))}},{key:"_targetOut",value:function(t,e){var r=this.targets[t];r.tracker.style.display=r.zoom.style.display="none",r.tracker.style.left=0,r.tracker.style.top=0}},{key:"_creatDom",value:function(t){var e=t.target.getAttribute("href");if(a.default.insertHtml(t.target,"beforeend",'<div class="magnifier-tracker"></div>'),a.default.insertHtml(t.target,"beforeend",'<div class="magnifier-zoom"><img src="'+e+'"></div>'),a.default.insertHtml(t.target,"beforeend",'<div class="magnifier-loader"></div>'),t.thumbImg=t.target.querySelector("img"),t.bigImg=t.target.querySelector(".magnifier-zoom img"),t.tracker=t.target.querySelector(".magnifier-tracker"),t.zoom=t.target.querySelector(".magnifier-zoom"),t.loader=t.target.querySelector(".magnifier-loader"),this.options.showTitle){var r=t.target.getAttribute("title");a.default.insertHtml(t.zoom,"beforeend",'<div class="magnifier-title">'+r+"</div>")}}},{key:"_trackerEvent",value:function(t){var e=t.trackerSize=Math.min(t.width,t.height)/5;t.tracker.style.width=t.tracker.style.height=e+"px",t.tracker.style.display=t.zoom.style.display="block";var r;r=t.left<=e/2?0:t.left>t.width-e/2?t.width-e:t.left-e/2;var o;o=t.top<=e/2?0:t.top>t.height-e/2?t.height-e:t.top-e/2,t.trackerLeft=r,t.tracker.style.left=r+"px",t.trackerTop=o,t.tracker.style.top=o+"px"}},{key:"_zoomEvent",value:function(t){t.zoom.style.width=t.zoom.style.height=this.options.size+"px";var e=0,r=0;"top"===this.options.position?(e=-(this.options.height+this.options.margin)+"px",r=0):"right"===this.options.position?(e=0,r=t.width+this.options.margin+"px"):"bottom"===this.options.position?(e=t.height+this.options.margin+"px",r=0):"left"===this.options.position&&(e=0,r=-(this.options.width+this.options.margin)+"px"),t.zoom.style.left=r,t.zoom.style.top=e;var o=this.options.size/t.trackerSize;t.bigImg.style.width=t.width*o+"px",t.bigImg.style[this.transformProp]="translate3d(-"+t.trackerLeft*o+"px, -"+t.trackerTop*o+"px, 0)"}},{key:"_getPointer",value:function(t,e){return{left:e.pageX-t.x,top:e.pageY-t.y}}},{key:"_imgLoad",value:function(t){var e=function(t){return!("naturalHeight"in t&&t.naturalHeight+t.naturalWidth===0)||t.width+t.height!==0};return new Promise(function(r,o){if(t.complete)return e(t)?r(t):o(t);t.addEventListener("load",function(){return e(t)?r(t):o(t)}),t.addEventListener("error",function(){return o(t)})})}},{key:"_transformProp",value:function(){return window.transformProp||function(){var t=document.createElement("div");if(null==t.style.transform){var e=["Webkit","Moz","ms"];for(var r in e)if(void 0!==t.style[e[r]+"Transform"])return e[r]+"Transform"}return"transform"}()}},{key:"destory",value:function(){var t=this;this.targets.forEach(function(e){e.target.removeEventListener("mousemove",t._targetHover,!1),e.target.removeEventListener("mouseout",t._targetOut,!1),e.target.removeAttribute("data-magnifier-index"),a.default.removeElement(e.tracker),a.default.removeElement(e.zoom),a.default.removeElement(e.loader)})}}],[{key:"DEFAULTS",get:function(){return{size:200,ratio:5,position:"right",margin:20,showTitle:!0}}}]),t}();window.Magnifier=s,t.exports=s}])});