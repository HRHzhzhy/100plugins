!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";function r(e){for(var t=e.length,n=[],r=0;r<t;r+=1)n.push(e[r]);return n}e.exports={select:function(e){return document.querySelector(e)},selectAll:function(e){return r((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e))},find:function(e,t){return r(e.querySelectorAll(t))},removeClass:function(e,t){e.classList.remove(t)},addClass:function(e,t){e.classList.add(t)},hasClass:function(e,t){return e.classList.contains(t)},removeElement:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},closest:function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e},getStyle:function(e,t){return window.getComputedStyle(element,null).getPropertyValue(t)},blur:function(){document.activeElement&&document.activeElement.blur()},insertHtml:function(e,t,n){var r=["beforebegin","afterbegin","beforeend","afterend"];if(!r.includes(t))throw new TypeError("'position' must be one of them: "+r.join("„ÄÅ"));e.insertAdjacentHTML(t,n)}}},,function(e,t,n){},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2);var i,s=(i=n(0))&&i.__esModule?i:{default:i},a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r({},e.DEFAULTS,n),this.containerEl=t instanceof Element?t:document.querySelector(t),this.danmusData=[],this.transformProp=this._transformProp(),this.startTime=null,this.containerElSize={width:0,height:0},this._init()}return o(e,[{key:"_init",value:function(){s.default.insertHtml(this.containerEl,"beforeend",'<div class="__danmu__"></div>'),this.danmuEl=this.containerEl.querySelector(".__danmu__"),this.danmuEl.style.zIndex=this.options.zIndex,this.danmuEl.style.opacity=this.options.opacity,this.containerElSize.width=Number(this._getStyle(this.containerEl,"width").replace(/px/,"")),this.containerElSize.height=Number(this._getStyle(this.containerEl,"height").replace(/px/,""))}},{key:"_play",value:function(e,t,n){s.default.insertHtml(this.danmuEl,"beforeend",'<div class="__danmu__item" id="id_'+e.id+'" style="\n      left: '+this.containerElSize.width+"px;\n      font-size: "+this.options.fontSize[e.size]+"px;\n      color: "+e.color+';\n    ">'+e.text+"</div>");var r=this.danmuEl.querySelector("#id_"+e.id),o=Number(this._getStyle(r,"width").replace(/px/,"")),i=Number(this._getStyle(r,"height").replace(/px/,"")),a=o+this.containerElSize.width+(t?2:0);r.style[this.transformProp]="translate3d(-"+a+"px, 0, 0)",r.style.top=this._randomInt(this.options.safeDistance[0],this.containerElSize.height-i-this.options.safeDistance[1])+"px",r.style.transition=this.transformProp+" "+(e.speed||this.options.speed)+"ms linear",e.border&&(r.style.textShadow=e.border+" 1px 0px 1px, "+e.border+" 0px 1px 1px, "+e.border+" 0px -1px 1px, "+e.border+" -1px 0px 1px"),t&&(r.style.border="1px solid "+e.color),n&&n(e),setTimeout(function(){s.default.removeElement(r)},e.speed||this.options.speed)}},{key:"_randomId",value:function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}},{key:"_getStyle",value:function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}},{key:"_randomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"_transformProp",value:function(){return window.transformProp||function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}()}},{key:"start",value:function(){var e=this;return this.startTime=(new Date).getTime(),this.danmusData.forEach(function(t){setTimeout(function(){e.send(t,null,!1)},t.time)}),this}},{key:"send",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r({},e,{id:this._randomId(),time:this.startTime?(new Date).getTime()-this.startTime:0});return this._play(o,n,t),this}},{key:"setDanmu",value:function(e){return this.danmusData=e,this}}],[{key:"DEFAULTS",get:function(){return{zIndex:100,speed:7e3,color:"#FFFFFF",fontSize:[18,24],opacity:.9,safeDistance:[10,50]}}}]),e}();window.Danmu=a,e.exports=a}])});